<?xml version="1.0" encoding="UTF-8"?>

<process-definition  xmlns="urn:jbpm.org:jpdl-3.2"  name="InsuranceProcess">


	<start-state name="start">
		<transition to="Initialize and validate Request" />
	</start-state>


	<process-state name="Initialize and validate Request" async="true">
		<sub-process name="Insurance_InitializeValidatingProcess" />
		<variable access="read,write" name="requestId" mapped-name="requestId" />
		<variable access="read,write" name="ORIGINAL_REQUEST" mapped-name="ORIGINAL_REQUEST"/>
		<transition to="Initialize and validate request OK" />
	</process-state>

	<process-state name="Matching requester" async="true">
		<sub-process name="Insurance_MatchingRequesterProcess" />
		<variable access="read,write" name="requestId1" mapped-name="requestId1" />
		<variable access="read,write" name="CREDIT_CHECK1" mapped-name="CREDIT_CHECK1" />
		<variable access="read,write" name="INDICATION_INSURED_CUSTOMER1" mapped-name="INDICATION_INSURED_CUSTOMER1" />
		<variable access="read,write" name="CUSTOMER_NUMBER1" mapped-name="CUSTOMER_NUMBER1" />
		<variable access="read,write" name="OPPID1" mapped-name="OPPID1" />
		<variable access="read,write" name="CUSTOMER_NAW1" mapped-name="CUSTOMER_NAW_DATA1" />
		<variable access="read,write" name="ORIGINAL_REQUEST1" mapped-name="ORIGINAL_REQUEST1"/>
		<transition to="Matching requester OK" />
	</process-state>

	<decision name="Matching requester OK">
		<handler config-type="bean" class="org.jboss.jbpm.handler.SubProcessOKHandler">
			<endStateNodeName>
				Complete Request
			</endStateNodeName>
		</handler>
		<transition to="Process customer data" />
	</decision>

	<process-state name="Process customer data" async="true">
		<sub-process name="Insurance_ProcessingCustomerDataProcess" />
		<variable access="read,write" name="requestId2" mapped-name="requestId2" />
		<variable access="read,write" name="CREDIT_CHECK2" mapped-name="CREDIT_CHECK2" />
		<variable access="read,write" name="INDICATION_INSURED_CUSTOMER2" mapped-name="INDICATION_INSURED_CUSTOMER2" />
		<variable access="read,write" name="CUSTOMER_NUMBER2" mapped-name="CUSTOMER_NUMBER2" />
		<variable access="read,write" name="OPPID2" mapped-name="OPPID2" />
		<variable access="read,write" name="CUSTOMER_NAW2" mapped-name="CUSTOMER_NAW_DATA2" />
		<variable access="read,write" name="L7_NEW_CUSTOMER2" mapped-name="L7_NEW_CUSTOMER2" />
		<variable access="read,write" name="L7_FOUND_ACCOUNTNUMBERS2" mapped-name="L7_FOUND_ACCOUNTNUMBERS2" />
		<variable access="read,write" name="L7_CUSTOMERID2" mapped-name="L7_CUSTOMERID2" />
		<variable access="read,write" name="ORIGINAL_REQUEST2" mapped-name="ORIGINAL_REQUEST2"/>
		<transition to="Process customer data OK" />
	</process-state>

	<decision name="Process customer data OK">
		<handler class="org.jboss.jbpm.handler.SubProcessOKHandler">
			<endStateNodeName>
				Complete Request
			</endStateNodeName>
		</handler>
		<transition to="Create product" />
	</decision>

	<decision name="Initialize and validate request OK">
		<handler class="org.jboss.jbpm.handler.SubProcessOKHandler">
			<endStateNodeName>
				Complete Request
			</endStateNodeName>
		</handler>
		<transition to="Matching requester" />
	</decision>

	<process-state name="Create product" async="true">
		<sub-process name="Insurance_CreatingProductProcess" />
		<variable access="read,write" name="requestId3" mapped-name="requestId3" />
		<variable access="read,write" name="CREDIT_CHECK3" mapped-name="CREDIT_CHECK3" />
		<variable access="read,write" name="INDICATION_INSURED_CUSTOMER3" mapped-name="INDICATION_INSURED_CUSTOMER3" />
		<variable access="read,write" name="CUSTOMER_NUMBER3" mapped-name="CUSTOMER_NUMBER3" />
		<variable access="read,write" name="OPPID3" mapped-name="OPPID3" />
		<variable access="read,write" name="CUSTOMER_NAW3" mapped-name="CUSTOMER_NAW_DATA3" />
		<variable access="read,write" name="L7_NEW_CUSTOMER3" mapped-name="L7_NEW_CUSTOMER3" />
		<variable access="read,write" name="L7_FOUND_ACCOUNTNUMBERS3" mapped-name="L7_FOUND_ACCOUNTNUMBERS3" />
		<variable access="read,write" name="L7_POLICY_NUMBER3" mapped-name="L7_POLICY_NUMBER3" />
		<variable access="read,write" name="L7_CUSTOMERID3" mapped-name="L7_CUSTOMERID3" />
		<variable access="read,write" name="ORIGINAL_REQUEST3" mapped-name="ORIGINAL_REQUEST3"/>
		<transition to="Create product OK" />
	</process-state>

	<decision name="Create product OK">
		<handler class="org.jboss.jbpm.handler.SubProcessOKHandler">
			<endStateNodeName>
				Voltooien aanvraag
			</endStateNodeName>
		</handler>
		<transition to="Complete request" />
	</decision>

	<process-state name="Complete request" async="true">
		<sub-process name="Insurance_CompletingRequestProcess" />
		<variable access="read,write" name="requestId4" mapped-name="requestId4" />
		<variable access="read,write" name="CREDIT_CHECK4" mapped-name="CREDIT_CHECK4" />
		<variable access="read,write" name="INDICATION_INSURED_CUSTOMER4" mapped-name="INDICATION_INSURED_CUSTOMER4" />
		<variable access="read,write" name="CUSTOMER_NUMBER4" mapped-name="CUSTOMER_NUMBER4" />
		<variable access="read,write" name="OPPID4" mapped-name="OPPID4" />
		<variable access="read,write" name="CUSTOMER_NAW4" mapped-name="CUSTOMER_NAW_DATA4" />
		<variable access="read,write" name="L7_NEW_CUSTOMER4" mapped-name="L7_NEW_CUSTOMER4" />
		<variable access="read,write" name="L7_FOUND_ACCOUNTNUMBERS4" mapped-name="L7_FOUND_ACCOUNTNUMBERS4" />
		<variable access="read,write" name="L7_POLICY_NUMBER4" mapped-name="L7_POLICY_NUMBER4" />
		<variable access="read,write" name="L7_CUSTOMERID4" mapped-name="L7_CUSTOMERID4" />
		<variable access="read,write" name="ORIGINAL_REQUEST4" mapped-name="ORIGINAL_REQUEST4"/>
		<transition to="Complete request OK" />
	</process-state>

	<decision name="Complete request OK">
		<transition to="end" />
	</decision>


	<end-state name="end" />


</process-definition>